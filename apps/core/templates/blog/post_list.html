{% extends "base.html" %}

{% block title %}Blog{% endblock %}

{% block content %}
<div class="auth-wrapper">
    <div class="auth-card">
        <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:16px;">
            <div>
                <h1 class="auth-title" style="margin-bottom:4px;">Blog Posts</h1>
                <p class="auth-subtitle" style="margin-bottom:0;">
                    Read the latest posts from our users.
                </p>
            </div>
            {% if request.user.is_authenticated %}
                <a href="{% url 'blog:post_create' %}" class="btn btn-primary">
                    + New Post
                </a>
            {% endif %}
        </div>

        {% if posts %}
            <div style="display:flex; flex-direction:column; gap:12px;">
                {% for post in posts %}
                    <article style="padding:14px 16px; border-radius:12px; border:1px solid #e5e7eb; background:#f9fafb;">
                        <h2 style="margin:0 0 6px;">
                            <a href="{% url 'blog:post_detail' post.pk %}" style="text-decoration:none; color:#111827;">
                                {{ post.title }}
                            </a>
                        </h2>
                        <p style="margin:0 0 6px; font-size:13px; color:#6b7280;">
                            by {{ post.author.username }} â€¢ {{ post.created_at|date:"M d, Y H:i" }}
                        </p>
                        <p style="margin:0; font-size:14px; color:#4b5563;">
                            {{ post.content|truncatechars:140 }}
                        </p>
                        {% if request.user == post.author %}
                            <div style="margin-top:8px; display:flex; gap:8px;">
                                <a href="{% url 'blog:post_update' post.pk %}" class="btn btn-primary" style="font-size:12px; padding:6px 10px;">Edit</a>
                                <a href="{% url 'blog:post_delete' post.pk %}" class="btn" style="font-size:12px; padding:6px 10px; background:#dc2626; color:#ffffff;">Delete</a>
                            </div>
                        {% endif %}
                    </article>
                {% endfor %}
            </div>
        {% else %}
            <p style="margin-top:8px; color:#6b7280;">No posts yet.</p>
        {% endif %}
    </div>
</div>
{% endblock %}
